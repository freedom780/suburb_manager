# CI / CD

## Create a build plan in Bamboo
Use a structure similar to the one below: 
- **Build Stage**
- **Build Job**
- **Source Code Checkout**
- **Script** (gradlew -DbuildNo=%BUILD_NO% clean assemble test)
- **JUnit Parser** (pattern: \*\*/build/test-results/\*\*/\*.xml)
- **Code Analysis**
- **Source Code Checkout**
- **Sonar Gradle**

## Create a deployment plan in Bamboo
Note: Use the above build plan while configuring the deployment. 
- **Clean working directory**
- **Artifact download** (download the war artefact generated by the above build)
- **SCP Task** (uploading to an Amazon EC2 instance)
- **Artifact download** (download the application configuration file from a separate repository for security reasons)
- **SCP Task** (upload the configuration file to the same Amazon EC2 instance)
- **SSH Task** (restart the server or the Docker containers depending on the deployment infrastructure)
